# Smart Reply for Gmail

Gmail のスレッド内容からコンテキストを抽出し、返信文の候補をその場で提案するシンプルな Chrome 拡張機能です。LLM などの外部サービスを呼び出さず、拡張機能内のヒューリスティックで候補を生成します。

## 特長
- Gmail の返信エディタを検知して自動的にサジェストパネルを表示
- 最新のメッセージ本文を解析し、質問・日程調整・資料送付などのシグナルを検知
- 日本語と英語を簡易判定し、該当言語での返信候補を提供
- 候補をクリックすると返信エディタに自動挿入

## 使い方
1. このリポジトリをクローンまたはダウンロードして任意のフォルダに展開します。
2. Chrome で `chrome://extensions` を開き、右上の「デベロッパーモード」をオンにします。
3. 「パッケージ化されていない拡張機能を読み込む」を押して、このリポジトリのルートディレクトリを選択します。
4. Gmail を開き、返信エディタにフォーカスすると画面右下にサジェストパネルが表示されます。
5. 候補をクリックすると返信エリアに文章が挿入されます。不要な場合はパネルの “×” で一時的に非表示にできます。

## ファイル構成
- `manifest.json` — Chrome 拡張機能のマニフェスト設定
- `src/content-script.js` — Gmail 上で DOM を監視し返信候補を計算するコンテンツスクリプト
- `src/styles.css` — サジェストパネルのスタイル定義
- `.gitignore` — 無視するファイル/ディレクトリの定義

## 仕組みの概要
1. Gmail の DOM を監視し、返信用のエディタ (`div[aria-label="Message Body"]`) にフォーカスが当たったことを検知します。
2. スレッド内の最新メッセージから引用部分を除外したテキストを抽出します。
3. ヒューリスティックで質問・日程調整・納期・資料送付などのキーワードを検知し、返信例を組み立てます。
4. サジェストパネルに候補を表示し、クリックで `document.execCommand('insertText')` を通じてエディタに挿入します。

## 制限と今後の拡張案
- DOM 構造が大きく変わると取得ロジックを更新する必要があります。
- 現在は静的なヒューリスティックのみ対応しているため、より高度な応答には LLM や外部 API の連携が必要です。
- 候補のパーソナライズやトーン調整（丁寧/カジュアルなど）は今後の改善ポイントです。

